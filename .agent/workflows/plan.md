---
description: "계획 문서 작성. Use when: 계획해, plan, 아이디어, 기획"
---

# 계획 문서 작성

사용자의 아이디어나 요구사항을 `common/docs/plan/`에 계획 문서로 정리합니다.

## 파일 위치

```
common/docs/plan/YYYY-MM-DD_{주제}.md
```

## 멀티레벨 TODO 구조

단순한 체크리스트가 아닌 2레벨 구조를 필수로 작성합니다:
- **1레벨**: 도메인/목적별 상위 그룹 (`1. [ ] **상위 작업명**`)
- **2레벨**: 원자적 대상 파일과 변경 사항 (`  - [ ] \`파일명\`: 세부 변경 내용`)

**분해 및 승격 규칙:**
- 단일 작업에 수정할 파일이 5개 이상이거나 복잡도가 크면 별도 Phase로 승격시킵니다.
- 복잡도에 따라 파일 단위에서 함수 단위의 3레벨까지 확장 가능합니다.

## 코드블럭 내 체크박스 규칙

일반 텍스트가 아닌 코드블럭(` ``` `) 내부에 체크박스를 표기해야 할 경우:
- 마크다운 문법의 `[ ]`나 `[x]` 대신 **`☐` (U+2610)** 및 **`☑` (U+2611)** 를 필수 사용합니다.
- 이는 `/done` 등의 정규식 파서가 코드블럭 내 내용을 실 작업으로 오작동하여 파싱하는 것을 방지합니다.

## Workflow

### 1단계: 요구사항 파악

사용자에게 확인:
- 대상 프로젝트 (없으면 공통)
- 구현하고 싶은 기능/개선사항
- 우선순위 (있다면)

### 2단계: 문서 생성 및 템플릿 작성

템플릿 기반으로 작성합니다:

```markdown
# {제목}

> 작성일: YYYY-MM-DD
> 대상 프로젝트: {project-name | 공통}
> 상태: 초안
> 진행률: 0%

---

## 개요
{배경 및 목적}

---

## 구현 항목
| 우선순위 | 항목 | 설명 | 난이도 |
|:-------:|------|------|:------|
| P0 | ... | ... | 낮음 |
| P1 | ... | ... | ... |

---

## 검증 계획 (Python/백엔드 한정 필수)
- 테스트 실행 명령: `pytest ...`
- 기대 결과: ...
- 회귀(Regression) 위험 요소: ...
- [ ] 테스트 통과 여부 검증 수행 완료

---
## 구현 순서
1. [ ] **상위 작업 A**
   - [ ] `file_a.ts`: 세부 로직 변경
   - [ ] `file_b.svelte`: UI 적용
```

### 3단계: 모드 선택

계획의 규모에 따라 관리 모드를 결정합니다:
- **모드 A (경량)**: Phase 1~2개 및 전체 작업 수 5개 이하. (위 템플릿과 같이 plan 내부에 TODO 병합 관리)
- **모드 B (대규모)**: Phase 3개 이상 또는 작업 수 6개 초과 시. (plan 문서 자체를 `_todo.md`라는 전용 체크리스트 파일로 분리 생성하고, 원본 plan에서는 이 파일 위치만 참조시킵니다)

### 4단계: 안내

```
📝 계획 문서가 생성되었습니다!

파일: common/docs/plan/YYYY-MM-DD_{주제}.md

다음 단계:
- 검토 후 수정이 필요하면 말씀해주세요
- 구현을 시작하려면 "다음" 또는 "구현해"
```

### 5단계: 최종 검증

계획 확정 전 5가지를 자체 검증합니다:
1. plan 생성 위치 및 파일명 적합성
2. TODO(혹은 `_todo.md`) 존재 여부
3. 아카이브 대상이 있다면 역참조 연결
4. 프로젝트의 `TODO.md` 연계
5. 루트 `wtools/TODO.md` 연계

## 문서 상태 & 진행률

문서 상태는 다음 7단계를 따르며 전이됩니다.
**초안 → 검토대기 → 검토완료 → 구현중 → 구현완료 → (수정필요 / 보류)**

- 진행률(%): 문서 내 총 `[ ]` 대비 `[x]` 의 비율을 수식으로 계산하여 메타 영역에 표기합니다.

## 우선순위 기준

| 우선순위 | 기준 |
|:-------:|------|
| P0 | 즉시 실행 가능, 핵심 |
| P1 | 중요하지만 P0 이후 |
| P2 | 있으면 좋은 기능 |
| P3 | 장기 과제 |

## 주의사항

- 포트/프로세스 강제 종료 금지

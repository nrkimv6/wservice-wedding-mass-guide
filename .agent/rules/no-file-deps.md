# 레포 간 file: 의존성 강제 규칙

## 배경

각 프로젝트(sacred-hours, activity-hub 등)는 별도의 git 레포이며 Cloudflare Workers 환경에서 **독립적으로 빌드**됩니다. 배포 머신에서는 해당 레포 하나만 클론 받으므로, 부모 디렉토리의 공통 라이브러리(`file:../common-ui` 등)는 배포 환경에서 존재하지 않아 빌드 실패로 직결됩니다.

## 금지 패턴

1. **별도 레포 간 `file:` 상대 경로 의존성**
   - `package.json`의 의존성 항목에 `"@wtools/...": "file:../..."` 등을 지정하는 것은 배포 단절을 의미합니다. 절대 금지합니다.
2. **공통 패키지 폴더 묶음 + `file:` 상대 경로 공유 방식**
   - 로컬 작업의 효율성을 위해 부모 디렉토리에 폴더를 만들고 참조하는 안목적 패턴을 금지합니다.

## 허용 대안

공통 코드가 요구될 때는 아래의 대안 중 하나를 택해야 합니다:
1. **인라인 복사**: 각 개별 프로젝트로 코드를 복사해서 독립시킵니다. (현재 권장 채택 방식)
2. **npm 퍼블리시**: 모듈을 떼어내 정식 npm registry 패키지로 전파합니다.
3. **monorepo 전환**: Turborepo 등 본격적인 모노레포 아키텍처를 도입하여 클라우드 빌드 사이클을 맞춥니다.

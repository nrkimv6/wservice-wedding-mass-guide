---
name: expand-todo
description: "계획 문서의 TODO 체크리스트를 2단계 원자 작업으로 확장. Use when: 확장, expand, 체크리스트 확장, todo 확장, 구체화"
---

# TODO 체크리스트 2단계 확장

기존 계획 문서의 빈약한 체크리스트를 **2레벨 원자 작업**으로 확장합니다.
코드베이스를 분석하여 각 작업에 대상 파일, 함수 시그니처, 구체적 변경 내용을 포함합니다.

## 트리거

- "확장", "expand", "체크리스트 확장", "todo 확장", "구체화"
- 계획 문서의 체크리스트가 빈약할 때

## 입력

사용자가 다음 중 하나를 제공:
- 계획 문서 경로 (예: `docs/plan/2026-02-23-feature.md`)
- 계획 문서 이름 또는 키워드 (검색으로 찾기)
- IDE에서 열려있는 plan 파일 (system-reminder로 감지)

## 실행 단계

### 1단계: 계획 문서 읽기

1. 대상 plan 파일을 Read로 읽는다
2. 기존 체크리스트 구조를 파악한다
3. 각 Phase와 작업 항목을 식별한다

### 2단계: 코드베이스 분석

**각 체크리스트 항목에 대해:**

1. 대상 파일의 **실제 코드**를 Read로 읽는다
2. 수정 대상 함수/클래스의 현재 구현을 확인한다
3. 기존 패턴, 임포트, 의존성을 파악한다
4. 프론트엔드 ↔ 백엔드 연동 시 양쪽 코드 모두 확인

**병렬 조사**: 독립적인 파일들은 Task(Explore) 에이전트로 병렬 조사하여 속도를 높인다.

### 3단계: 2레벨 구조로 확장

기존 체크리스트를 아래 구조로 변환한다:

> **출력 형식은 반드시 `- [ ]` 마크다운 체크박스**를 사용한다. (`☐` 유니코드 금지 — `/done` 스킬 파싱 호환)

```markdown
### Phase N: {Phase 이름}

1. - [ ] **{상위 작업}** — 개념적 단위
   - [ ] `{파일경로}`: {구체적 변경 1}
   - [ ] `{파일경로}`: {구체적 변경 2}

2. - [ ] **{상위 작업}** — 개념적 단위
   - [ ] `{파일경로}`: {구체적 변경}
```

### 확장 규칙

#### 레벨 구분

| 레벨 | 용도 | 예시 |
|------|------|------|
| **상위** (번호) | 기능/개념 단위 | "Redis 로그 헬퍼 추가", "API 엔드포인트 수정" |
| **하위** (대시) | 초보 할당 가능한 원자 작업 | "`plan_service.py:L5`: `import redis` 추가" |

#### 하위 작업 필수 요소

1. **파일 경로**: 어느 파일인지 명확히
2. **한 줄 한 동작**: "추가", "수정", "삭제" 중 하나만
3. **구체적 내용**: "버튼 추가" ✗ → "`LoginForm.svelte`: Submit 버튼에 `disabled={!valid}` 속성 추가" ✓
4. **함수 수준 명세** (새 함수 작성 시): `함수명(파라미터) → 반환값` + 핵심 로직 1줄
5. **기존 함수 수정 시**: 함수명 + 변경할 부분 + before/after 요약

#### 복잡도별 분해 깊이

| 복잡도 | 기준 | 분해 수준 |
|--------|------|----------|
| **낮음** | 설정 변경, 값 추가 | 파일 + 위치 |
| **중간** | 새 함수 작성, 로직 추가 | 함수 시그니처 + 동작 |
| **높음** | 여러 함수 연동 | 함수별 각각 + 연결 순서 |

#### 분해 판단 기준

상위 작업을 하위로 분해해야 하는 경우:
- 파일을 2개 이상 수정
- "~하고 ~한다"처럼 AND로 연결된 작업
- 중간 검증이 필요한 경우

#### 승격 규칙

하나의 상위 작업에 하위가 5개 이상이면 별도 Phase로 승격 검토

#### 백엔드/Python 항목 확장 시

- 각 함수에 구현 + TC(Right/Boundary/Error/Cross) 서브항목 생성
- Phase 끝에 e2e HTTP 테스트 항목 추가 (정상 응답 + 에러 응답)

### 4단계: plan 문서 업데이트

1. 기존 체크리스트 섹션을 확장된 2레벨 구조로 **Edit**으로 교체
2. Phase별 작업 수 요약 추가
3. Read로 반영 확인

### 5단계: 안내

```
체크리스트 확장 완료

{파일경로}
- Phase 1: {이름} ({N}개 작업)
- Phase 2: {이름} ({N}개 작업)
- Phase 3: {이름} ({N}개 작업)
총 {M}개 원자 작업

구현을 시작하려면 "다음" 또는 "구현해"라고 말씀해주세요.
```

## 주의사항

- **코드를 반드시 읽는다**: 추측으로 작업을 나누지 않는다. 실제 코드를 보고 정확한 파일, 라인, 함수를 명시한다.
- **기존 구현 범위 유지**: 체크리스트를 확장할 뿐, 새로운 기능이나 범위를 추가하지 않는다.
- **포맷 호환성**: 반드시 `- [ ]` / `- [x]` 마크다운 체크박스를 사용한다. `☐` (U+2610) 유니코드 문자는 사용 금지 — `/done` 스킬이 `- [ ]` 패턴으로 파싱한다.

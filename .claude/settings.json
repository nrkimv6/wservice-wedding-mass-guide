{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "powershell.exe -NoProfile -Command \"$input = [Console]::In.ReadToEnd(); if ($input -match '\\bgit\\s+commit\\b') { Write-Host '\\n[BLOCKED] git commit 직접 사용 금지!\\n  -> \\\"D:\\work\\project\\tools\\common\\commit.sh\\\" \\\"message\\\"\\n  -> 또는 /commit 스킬 사용\\n' -ForegroundColor Red; exit 1 }\""
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "powershell.exe -NoProfile -Command \"$raw = [Console]::In.ReadToEnd(); try { $d = $raw | ConvertFrom-Json; $fp = $d.tool_input.file_path; if ($fp -match '\\.svelte$') { $dir = Split-Path $fp; while ($dir -and !(Test-Path (Join-Path $dir 'package.json'))) { $dir = Split-Path $dir }; if ($dir) { Push-Location $dir; Write-Host '[Hook] svelte 변경 감지 → npm run check' -ForegroundColor Cyan; npm run check 2>&1 | Select-Object -First 30; Pop-Location } } } catch {}\"",
            "timeout": 30
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "powershell.exe -NoProfile -ExecutionPolicy Bypass -File \".claude\\hooks\\check-done.ps1\"",
            "timeout": 30
          }
        ]
      }
    ]
  }
}

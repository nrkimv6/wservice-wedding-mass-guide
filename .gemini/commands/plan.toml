description = "계획 문서 작성. Use when: 계획해, plan, 아이디어, 기획"

prompt = """
# 계획 문서 작성

사용자의 아이디어나 요구사항을 `common/docs/plan/`에 계획 문서로 정리합니다.

## 파일 위치

```
common/docs/plan/YYYY-MM-DD_{주제}.md
```

## 멀티레벨 TODO 구조

단순한 체크리스트가 아닌 2레벨 구조를 필수로 작성합니다:
- **1레벨**: 도메인/목적별 상위 그룹 (`1. [ ] **상위 작업명**`)
- **2레벨**: 원자적 대상 파일과 변경 사항 (`  - [ ] 파일명: 세부 변경 내용`)

## Workflow

### 1단계: 요구사항 파악

사용자에게 확인:
- 대상 프로젝트 (없으면 공통)
- 구현하고 싶은 기능/개선사항
- 우선순위 (있다면)

### 2단계: 코드베이스 분석

반드시 대상 프로젝트의 실제 코드를 읽고 계획을 세운다:
- 수정 대상 파일의 현재 코드 확인
- 기존 패턴, 컨벤션 파악
- 의존성 및 영향 범위 확인

### 3단계: 계획 문서 작성 및 모드 선택

| 모드 | 판단 기준 |
|------|----------|
| **모드 A** | Phase 1-2개, 작업 5개 이하 — plan 내부에 TODO 포함 |
| **모드 B** | Phase 3개+, 작업 6개+ — 별도 `_todo.md` 생성, plan은 archive로 이동 |

### 4단계: wtools/TODO.md 동기화

wtools/TODO.md 해당 프로젝트 섹션에 신규 항목 추가.

### 5단계: 최종 검증

1. plan 문서가 올바른 위치에 존재하는지 확인
2. TODO 항목이 존재하는지 확인
3. 모드B일 경우 _todo.md 내 archive 역참조 경로 유효성 확인
4. 프로젝트 TODO.md의 Pending에 항목 존재 여부 확인
5. wtools/TODO.md에 해당 plan 링크 존재 여부 확인

{{args}}
"""
